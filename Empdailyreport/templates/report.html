{% load static %}
{% load custom_filter %}
<!DOCTYPE html>

<html lang="en" >
	<head>
		<meta charset="utf-8" />
		<title>
			Report
		</title>
		<meta name="description" content="Latest updates and statistic charts">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!--begin::Web font -->
		<link rel="icon" type="image/png" href="{% static 'list/images/icons/favicon.ico' %}"/>
		<link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">

		<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> -->
		<link href="{% static 'defaultassets/vendors/base/vendors.bundle.css'%}" rel="stylesheet" type="text/css" />
		<link href="{% static 'defaultassets/demo/default/base/style.bundle.css' %}" rel="stylesheet" type="text/css" />
		<link rel="shortcut icon" href="{% static 'defaultassets/demo/default/media/img/logo/favicon.ico'%}" />
		<script src="{% static 'jquery.js' %}"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
		<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> -->
		<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>

		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
		<script>
			var copyarray = [];
		 	var textNo=0;
		  WebFont.load({
		    google: {"families":["Poppins:300,400,500,600,700","Roboto:300,400,500,600,700"]},
		    active: function() {
		        sessionStorage.fonts = true;
		    }
		  });
		 $(document).ready(function(){
		 	
		 	$('#reportsubmitbtn').click(function(e){
		 		e.preventDefault();});
		 	if($('.projectselect').val().length==0){
		 		$('#reportsubmitbtn').attr("disabled",true);
		 	}
		 	$('.projectselect').on('select2:select', function (e) {
						$('#reportsubmitbtn').attr("disabled",false);
			            var optionValue = $(this).val();
			            var optionText = $(this).text();
			            var data = e.params.data;
			            var lastSelectedItem = e.params.data.id;
			            var uniqueId = lastSelectedItem.split(" ")
			            var id = uniqueId[1]
			            console.log("lastSelectedItem",lastSelectedItem);

			            displayrows(id,lastSelectedItem)
			});
			 	
			$('.projectselect').on(' select2:unselect', function (e) {
						if($('.projectselect').val().length==0){
							$('#reportsubmitbtn').attr("disabled",true);
			 			}
			            var optionValue = $(this).val();
			            var optionText = $(this).text();
			            var data = e.params.data;
			            var lastSelectedItem = e.params.data.id;
			            var uniqueId = lastSelectedItem.split(" ")
			            var id = uniqueId[1]
			            console.log("lastSelectedItem",lastSelectedItem);

			            deleterows(id)
			});
		});
	
			function displayrows(lastSelectedItem,name){
			//console.log('length',projects.length)
			 	var input='<br><div class="project 1" id ="'+lastSelectedItem+'" col-sm-4" style="margin-bottom:20px; margin-left:20px;"><div class="form-control" style=" background-color:#282a3c; border:1px solid white; color:white; "><p class="selected_project" >'+name+'</p></div><input type="text" value=" '+name+'" hidden class="pname" name = "selected_project[]" ></input><textarea class="form-control project_description " style="width:300px;" name="project_description[]" rows="5" cols="10"> </textarea></div>';
			 	$('.dynamic').append(input);
			 	
			}
			function deleterows(lastSelectedItem){
				var a = "."+lastSelectedItem
				// alert(a);
				$("#"+lastSelectedItem).remove(); 
				
				// $('.dynamic').closest(".div'+lastSelectedItem").remove();
			 	}
		// 	$('.projectselect').change(function(){
		// 		console.log("hii");
		//         var selections = [];
		//         // var arr = [];
		//         $(".projectselect option:selected").each(function(){
		//         	console.log("hii");
		//             var optionValue = $(this).val();
		//             var optionText = $(this).text();
		//             console.log("optionText",optionText);                
		//             selections.push(optionValue);
		//             // arr.push({optionValue:optionText})
		//             console.log("optionValue",optionValue);
		//             console.log(selections)
		//              var rowCount = $('#myTable tbody tr').length;
		//              console.log('rowCount',rowCount)
		//              // console.log('arr',arr)
		//              // console.log("len",arr.length)
		//             displayrows(selections)
	 //        	});
	 //     	});
		// });
  //         	function displayrows(projects ){
		//  	console.log('length',projects.length)
		//  	console.log('projects',projects )
		//  	var input='<div class="cancel'+projects+'"><div  class="form-control" style=" background-color:#191970; border:1px solid white; color:white; "><p class="selected_project" >'+projects+'</p></div><input type="text" value=" '+projects+'" hidden class="pname" name = "selected_project[]" ></input><textarea class="form-control project_description " style="width:400px;" name="project_description[]" rows="5" cols="60"> </textarea><a class="description_cancel" key="cancel'+projects+'">Cancel</a>';
		//   	if (textNo==0){
		//  		for(var i =0; i<projects.length;i++){
		// 			console.log('projectvalue',projects[i])
		//  			//$('#myTable tbody').append(input);
		// 		  	$('.textreport').append(input);
		// 		}
		// 		copyarray = Object.assign([],projects);

		//  	}
		//  	else{
		//  		copylen = copyarray.length;
		//  		console.log("copylen",copylen)
		//  		console.log('copyarray',copyarray)
		//  		console.log("projectlen",projects.length)
		//  		if(copylen < projects.length){
		//  			console.log('copyarray',copyarray)
		//  			console.log('projects',projects)
		//  			diff=projects.diff(copyarray);
		//  			console.log('diff',diff)
		//  			for(var j=0;j<diff.length;j++){
		// 		  		$('.textreport').append(input);
		// 			}
		// 		 	copyarray = Object.assign([],projects);
		// 		 	console.log('aftercopy',copyarray)

		//  		}
		//  		else if(copylen > projects.length){
		//  			console.log('copyarray',copyarray)
		//  			console.log('projects',projects)
		//  			diff=copyarray.diff(projects);
		//  			console.log('diff',diff)
		//  			for(var k=0;k<diff.length;k++){
		// 		  		// $('.textreport').remove();
		// 		  		console.log("k",k)
				  	
		// 			    }
		// 			var index = copyarray.indexOf(diff[0]);
		// 			if (index > -1) {
		// 			       copyarray.splice(index, 1);
		//  			}
		// 		 	// copyarray = Object.assign([],projects);

		//  		}
		 		
		//  	}
  //        	 textNo=textNo+1;
  //        	 copyarray = Object.assign([],projects);
		//  	}
		// // 	 if (rowCount == 0){
  //       	Array.prototype.diff = function(a) {
  //   			return this.filter(function(i) {return a.indexOf(i) < 0;});
		// 	};


          
		
		</script>
		<style>
			.m-portlet{width:1000px; margin:150px; margin-top:1.2rem;}
			.m-pricing-table-1.m-pricing-table-1--fixed{width:100%;}
			.m-portlet .m-portlet__body{padding-top:3.2rem;}
			.m-form.m-form--fit .m-form__group{
				margin-left:0px;
			}
			#myTable{
				height: 550px;
				width:550px;
			}
			.action{display: none;}
    		.action1{display: none;}
		</style>
		
	</head>
	
	<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-aside-left--minimize m-brand--minimize m-footer--push m-aside--offcanvas-default"  >
		
		<div class="m-grid m-grid--hor m-grid--root m-page">
			
			<header class="m-grid__item    m-header "  data-minimize-offset="200" data-minimize-mobile-offset="200" >
				<div class="m-container m-container--fluid m-container--full-height">
					<div class="m-stack m-stack--ver m-stack--desktop">
						
						<div class="m-stack__item m-stack__item--fluid m-header-head" style="background-color: #282a3c;" id="m_header_nav">
							<div id="m_header_menu" class="m-header-menu m-aside-header-menu-mobile m-aside-header-menu-mobile--offcanvas  m-header-menu--skin-light m-header-menu--submenu-skin-light m-aside-header-menu-mobile--skin-dark m-aside-header-menu-mobile--submenu-skin-dark "  >
								<ul class="m-menu__nav  m-menu__nav--submenu-arrow ">
									<li class="m-menu__item  m-menu__item--submenu m-menu__item--rel"  data-menu-submenu-toggle="click" data-redirect="true" aria-haspopup="true">
										<img src = "{% static 'logo.png'%}" width=40%>
										<!-- <a  href="#" class="m-menu__link m-menu__toggle">
											<i class="m-menu__link-icon flaticon-add"></i>
											<span class="m-menu__link-text">
												Actions
											</span>
											<i class="m-menu__hor-arrow la la-angle-down"></i>
											<i class="m-menu__ver-arrow la la-angle-right"></i> -->
										</a>
									</li>
								</ul>	
							</div>
							
							<button class="m-aside-header-menu-mobile-close  m-aside-header-menu-mobile-close--skin-dark " id="m_aside_header_menu_mobile_close_btn">
								<i class="la la-close"></i>
							</button>
							<div id="m_header_menu" class="m-header-menu m-aside-header-menu-mobile m-aside-header-menu-mobile--offcanvas  m-header-menu--skin-light m-header-menu--submenu-skin-light m-aside-header-menu-mobile--skin-dark m-aside-header-menu-mobile--submenu-skin-dark "  >
								
							</div>
														
							<div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general">
								<div class="m-stack__item m-topbar__nav-wrapper">
									<ul class="m-topbar__nav m-nav m-nav--inline">
										
										<li class="m-nav__item m-topbar__user-profile m-topbar__user-profile--img  m-dropdown m-dropdown--medium m-dropdown--arrow m-dropdown--header-bg-fill m-dropdown--align-right m-dropdown--mobile-full-width m-dropdown--skin-light" data-dropdown-toggle="click">
											<a href="#" class="m-nav__link m-dropdown__toggle">
												<span class="m-topbar__userpic">
													<img src="{% static 'defaultassets/app/media/img/users/user4.jpg'%}" class="m--img-rounded m--marginless m--img-centered" alt=""/>
												</span>
												<span class="m-topbar__username m--hide">
													Nick
												</span>
											</a>
											<div class="m-dropdown__wrapper">
												<span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
												<div class="m-dropdown__inner">
													<div class="m-dropdown__header m--align-center" style="background: url(../../../assets/app/media/img/misc/user_profile_bg.jpg); background-size: cover;">
														<div class="m-card-user m-card-user--skin-dark">
															<div class="m-card-user__pic">
																<img src="{% static 'defaultassets/app/media/img/users/user4.jpg'%} " class="m--img-rounded m--marginless" alt=""/>
															</div>
															<div class="m-card-user__details">
																<span class="m-card-user__name m--font-weight-500">
																	Mark Andre
																</span>
																<a href="" class="m-card-user__email m--font-weight-300 m-link">
																	mark.andre@gmail.com
																</a>
															</div>
														</div>
													</div>
													<div class="m-dropdown__body">
														<div class="m-dropdown__content">
															<ul class="m-nav m-nav--skin-light">
																<li class="m-nav__section m--hide">
																	<span class="m-nav__section-text">
																		Section
																	</span>
																</li>
																
																<li class="m-nav__separator m-nav__separator--fit"></li>
																<li class="m-nav__item">
																	<a href="/logout" class="btn m-btn--pill    btn-secondary m-btn m-btn--custom m-btn--label-brand m-btn--bolder">
																		Logout
																	</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</li>
										
									</ul>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</header>
			
			<div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
				
				<button class="m-aside-left-close  m-aside-left-close--skin-dark " id="m_aside_left_close_btn">
					<i class="la la-close"></i>
				</button>
				
				<div class="m-grid__item m-grid__item--fluid m-wrapper">
					
					<div class="m-subheader ">
						<div class="d-flex align-items-center">
							<!-- -->
							<div>
								<div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" data-dropdown-toggle="hover" aria-expanded="true">
									
									<div class="m-dropdown__wrapper">
										<span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
										<div class="m-dropdown__inner">
											<div class="m-dropdown__body">
												<div class="m-dropdown__content">
													<ul class="m-nav">
														<li class="m-nav__section m-nav__section--first m--hide">
															<span class="m-nav__section-text">
																Quick Actions
															</span>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-share"></i>
																<span class="m-nav__link-text">
																	Activity
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-chat-1"></i>
																<span class="m-nav__link-text">
																	Messages
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-info"></i>
																<span class="m-nav__link-text">
																	FAQ
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-lifebuoy"></i>
																<span class="m-nav__link-text">
																	Support
																</span>
															</a>
														</li>
														<li class="m-nav__separator m-nav__separator--fit"></li>
														<li class="m-nav__item">
															<a href="#" class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
																Submit
															</a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- END: Subheader -->
					<div class="m-content">
						<div class="m-portlet">
							<div class="m-portlet__head">
								<div class="m-portlet__head-caption">
									<div class="m-portlet__head-title">
										<h3 class="m-portlet__head-text">
											Report
										</h3>
									</div>
								</div>
							</div>
							<!--begin::Form-->
							<form class="m-form m-form--fit m-form--label-align-right">
								<div class="m-portlet__body">
															
									<div class="form-group m-form__group row">
										<label class="col-form-label" style = "margin-left: 50px;">
											Multi Select
										</label> 
										<div class="col-lg-4 col-md-9 col-sm-12" style="margin-left: 20px;">
											<select class="form-control m-select2 projectselect" id="m_select2_3" name="param" multiple="multiple" >

												{% for option in projectlist %}
									                  <option value="{{ option.projectName }}">{{ option.projectName }}</option>
									                  {% endfor %}	
											</select>
										</div>
									</div>
									
									<div class="m-form__seperator m-form__seperator--dashed m-form__seperator--space"></div>
										
									<div class="container-fluid">
									    <div class="row dynamic" >
									    
									  </div>

									</div>
								
								</div>
								<div class="m-portlet__foot m-portlet__foot--fit">
									<div class="m-form__actions m-form__actions">
										<div class="row">
										<div class="alert action  action1" ></div>

											<div class=" ml-lg-auto">
												<button type="submit" id ="reportsubmitbtn" class="btn btn-brand" style="background-color: #282a3c;">
													Submit
												</button>
												
											</div>
										</div>
									</div>
								</div>
							</form>
							

						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- end::Quick Sidebar -->		    
	    <!-- begin::Scroll Top -->
		<div class="m-scroll-top m-scroll-top--skin-top" data-toggle="m-scroll-top" data-scroll-offset="500" data-scroll-speed="300">
			<i class="la la-arrow-up"></i>
		</div>
		<!-- end::Scroll Top -->		    <!-- begin::Quick Nav -->
		<!-- begin::Quick Nav -->	
    	<!--begin::Base Scripts -->
		<script src="{% static 'defaultassets/vendors/base/vendors.bundle.js' %}" type="text/javascript"></script>
		<script src="{% static 'defaultassets/demo/default/base/scripts.bundle.js'%}" type="text/javascript"></script>
		<script src="{% static 'defaultassets/demo/default/custom/components/forms/widgets/select2.js'%}" type="text/javascript"></script>
		<script src="{% static 'validation.js' %}"></script>
		<!--end::Base Scripts -->
	</body>
	<!-- end::Body -->
</html>
